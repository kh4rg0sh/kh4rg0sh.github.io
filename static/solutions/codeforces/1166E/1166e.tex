\documentclass[11pt]{scrartcl}
\let\captionof\undefined
\usepackage[sexy,von]{evan}
\usepackage{wrapfig}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\geometry{margin=1in}

\usepackage{xcolor}
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=cyan
}

\usepackage{listings}
\usepackage{amsmath, amssymb}
\usepackage{graphicx}
\usepackage{float}

% Code listing setup for C++ (or Python)
\lstset{
    basicstyle=\ttfamily\small,
    numbers=left,
    numberstyle=\tiny,
    stepnumber=1,
    numbersep=5pt,
    tabsize=4,
    breaklines=true,
    breakatwhitespace=true,
    showstringspaces=false,
    frame=single,
    keywordstyle=\bfseries\color{blue},
    commentstyle=\color{green!70!black},
    stringstyle=\color{orange}
}

% Optional: caption color
\usepackage[labelfont=bf,labelsep=colon]{caption}
\usepackage{tikz} % for diagrams if needed

\title{Codeforces 1166E (2100)}
\author{kh4rg0sh}
\date{\today}

\begin{document}

\maketitle
\begin{abstract}
    \centering
    \url{https://codeforces.com/problemset/problem/1166/E}
\end{abstract}

\section{Solution}

\subsection{Explanation}
\begin{lemma}
    Consider two sets of natural numbers $A_1$ and $A_2$. If $A_1$ is a subset of $A_2$, then 
    $$
        \lcm(A_1) \le \lcm(A_2)
    $$
\end{lemma}
\begin{proof}
    Immediately follows by induction on the size of the set.
\end{proof}

\begin{lemma}
    Suppose the set of indices of shops dora visits are 
    \begin{align*}
        D_1, D_2, \ldots , D_m
    \end{align*}
    If the problem condition is true, then for any $i \neq j$ we can never have, 
    \begin{align*}
        D_i \cap D_j = \phi
    \end{align*}
\end{lemma}
\begin{proof}
    Suppose the set of indices of shops that swiper visits are
    \begin{align*}
        S_1, S_2, \ldots , S_m
    \end{align*}
    Since for any $i$, we have that $D_i$ and $S_i$ are disjoint partitions of the set of shops. Hence, if $D_i \cap D_j$ $=$ $\phi$ then $D_j \subseteq S_i$. This implies,
    \begin{align*}
        \lcm(S_j) < \lcm(D_j) \le \lcm(S_i) < \lcm(D_i)
    \end{align*}
    But $D_j \subseteq S_i$ $\implies$ $D_i \subseteq S_j$ $\implies$ $\lcm(D_i) \le \lcm(S_j)$, contradicting the problem statement.
\end{proof}

\paragraph{Back to the Problem}
Now we show that the above condition is the only sufficient condition for the problem condition to hold true.

\subsection{Code}

\begin{lstlisting}[language=C++]
void solve() {
    ll m, n;
    std::cin >> m >> n;

    std::vector<ll> a[m + 1];
    for (ll i = 1; i <= m; i++) {
        ll x;
        std::cin >> x;

        for (ll j = 1; j <= x; j++) {
            ll y;
            std::cin >> y;

            a[i].push_back(y);
        }
    }

    bool ans = true;
    for (ll i = 1; i <= m; i++) {
        for (ll j = i + 1; j <= m; j++) {
            std::vector<ll> val(n + 1);

            for (auto u: a[i]) {
                val[u]++;
            }

            for (auto u: a[j]) {
                val[u]++;
            }

            bool check = false;
            for (ll k = 1; k <= n; k++) {
                if (val[k] == 2) {
                    check = true;
                }
            }

            if (!check) {
                ans = false;
            }
        }
    }

    if (ans) {
        std::cout << "possible\n";
    } else {
        std::cout << "impossible\n";
    }
} 
\end{lstlisting}


\end{document}
